{
  "startTime": "2025-08-27T23:48:30.106Z",
  "mode": "postRepair",
  "totalTests": 5,
  "passedTests": 0,
  "failedTests": 5,
  "skippedTests": 0,
  "criticalFailures": 5,
  "testResults": {
    "Post-Repair Validation": {
      "name": "Post-Repair Validation",
      "script": "test-post-repair-validation.js",
      "startTime": 1756338510107,
      "endTime": 1756338513398,
      "duration": 3291,
      "exitCode": 1,
      "stdout": "ğŸ§ª POST-REPAIR VALIDATION SUITE\n==============================\nTarget Database: https://ynqdddwponrqwhtqfepi.supabase.co\nValidation Time: 2025-08-27T23:48:30.161Z\nEnvironment: Node.js v24.2.0 on darwin\n\nğŸ”§ VALIDATING DATABASE REPAIR COMPLETENESS...\nChecking all expected tables...\nâŒ Database repair validation failed: relation \"public.information_schema.tables\" does not exist\n\nğŸ¢ VALIDATING MULTI-TENANT FUNCTIONALITY...\nTesting organization context...\nâœ… Organization queries work (1 organizations)\nâœ… Organization member relationships work\nTesting data isolation...\nâŒ events missing organization_id\nâŒ social_posts missing organization_id\nâŒ dashboard_widgets missing organization_id\nTesting organization features...\nâœ… Organization features work (5 features)\nTesting theme system...\nâš ï¸  Theme system: relation \"public.organization_themes\" does not exist\n\nâš›ï¸  VALIDATING FRONTEND FUNCTIONALITY...\nTesting TypeScript compilation...\nâŒ TypeScript compilation failed\nâŒ 373 TypeScript errors (too many)\nTesting React components...\nâœ… OrganizationContext.tsx: Valid React component\nâœ… OrganizationSwitcher.tsx: Valid React component\nâœ… ThemeCustomization.tsx: Valid React component\nTesting custom hooks...\nâœ… useOrganizationData.ts: Valid custom hook\nâŒ useAuth.ts: Invalid hook structure\nTesting Organization Context Provider...\nâœ… Organization Context Provider complete\n\nğŸ› ï¸ VALIDATING PLATFORM ADMINISTRATION...\nTesting super admin system...\nâŒ Super admin system: relation \"public.platform_admins\" does not exist\nTesting platform analytics...\nâš ï¸  Platform analytics: relation \"public.platform_analytics\" does not exist\nTesting content moderation...\nâš ï¸  Content moderation: relation \"public.content_reports\" does not exist\nTesting audit trails...\nâš ï¸  Audit trails: relation \"public.platform_audit_logs\" does not exist\n\nâš¡ VALIDATING PERFORMANCE & SCALABILITY...\nTesting query performance...\nFast Organizations Query: 51ms (1 records)\nFast Complex Join Query: 40ms (1 records)\nFast Analytics Query: 65ms (0 records)\nâœ… Memory usage: 14MB heap\nTesting real-time latency...\nExcellent Real-time latency: 460ms\nâœ… Scalability score: 100/100\n\nğŸ”„ VALIDATING END-TO-END INTEGRATION...\nTesting complete data flow...\nâŒ Data flow broken: Could not find a relationship between 'organization_members' and 'profiles' in the schema cache\nTesting real-time synchronization...\nâœ… Real-time sync established\nTesting error handling...\nTesting user experience flow...\nâœ… User experience components complete\n\nğŸ“Š POST-REPAIR VALIDATION REPORT\n================================================================================\n\nğŸ”§ DATABASE REPAIR:\nTables: âŒ Incomplete\nFunctions: âŒ Issues\nRLS Policies: âŒ Inactive\nIndexes: âŒ Missing\nCompleteness: 0%\n\nğŸ¢ MULTI-TENANT FUNCTIONALITY:\nOrganization Context: âœ… Working\nData Isolation: âŒ Broken\nFeature Toggles: âœ… Working\nTheme System: âŒ Broken\nCompleteness: 50%\n\nâš›ï¸  FRONTEND:\nTypeScript: âŒ Errors\nComponents: âœ… Render\nHooks: âœ… Function\nContext: âœ… Working\nCompleteness: 75%\nCritical errors:\n  - 373 TypeScript compilation errors\n\nğŸ› ï¸ PLATFORM ADMINISTRATION:\nSuper Admin: âŒ Broken\nAnalytics: âŒ Broken\nModeration: âŒ Broken\nAudit Trails: âŒ Broken\nCompleteness: 0%\n\nâš¡ PERFORMANCE:\nQuery Performance: 3 tests\nMemory Usage: 14MB\nReal-time Latency: 460ms\nScalability Score: 100/100\n\nğŸ”„ INTEGRATION:\nEnd-to-End Flow: âŒ Broken\nReal-time Sync: âœ… Working\nError Handling: âŒ Broken\nUser Experience: âœ… Complete\nCompleteness: 50%\n\nğŸ¯ OVERALL ASSESSMENT:\nOverall Score: 46/100\nProduction Ready: âŒ NO\n\nğŸš¨ CRITICAL ISSUES TO RESOLVE:\nâŒ Database tables missing - run repair migration\nâŒ End-to-end data flow broken - functionality incomplete\n\nğŸ’¡ NEXT STEPS:\n1. URGENT: Resolve critical issues above\n2. Re-run this validation suite\n3. Address any remaining issues\n\nğŸ“‹ DETAILED RESULTS SAVED TO: post-repair-validation-results.json\nğŸ“‹ SUMMARY SAVED TO: validation-summary.json\n",
      "stderr": "",
      "success": false,
      "critical": true,
      "skipped": false,
      "error": null
    },
    "Database State Verification (Post-Repair)": {
      "name": "Database State Verification (Post-Repair)",
      "script": "test-database-state.js",
      "startTime": 1756338514399,
      "endTime": 1756338514582,
      "duration": 183,
      "exitCode": 1,
      "stdout": "ğŸ” DATABASE STATE VERIFICATION TEST SUITE\n==========================================\nTarget Database: https://ynqdddwponrqwhtqfepi.supabase.co\nExpected Tables: 72\nExpected Functions: 82\n\nğŸ“¡ TESTING DATABASE CONNECTIVITY...\nâš ï¸  No authenticated user (expected for anonymous connection)\nâŒ Database connectivity failed: relation \"public.information_schema.tables\" does not exist\n\nâŒ Cannot proceed without database connectivity\n",
      "stderr": "",
      "success": false,
      "critical": true,
      "skipped": false,
      "error": null
    },
    "Multi-Tenant Integration (Post-Repair)": {
      "name": "Multi-Tenant Integration (Post-Repair)",
      "script": "test-multitenant-integration.js",
      "startTime": 1756338515583,
      "endTime": 1756338515609,
      "duration": 26,
      "exitCode": 1,
      "stdout": "",
      "stderr": "node:internal/modules/esm/resolve:274\n    throw new ERR_MODULE_NOT_FOUND(\n          ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find module '/Users/lazy/Downloads/together-we-begin/client/src/services/RateLimitService.js' imported from /Users/lazy/Downloads/together-we-begin/test-multitenant-integration.js\n    at finalizeResolution (node:internal/modules/esm/resolve:274:11)\n    at moduleResolve (node:internal/modules/esm/resolve:859:10)\n    at defaultResolve (node:internal/modules/esm/resolve:983:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:801:12)\n    at #cachedDefaultResolve (node:internal/modules/esm/loader:725:25)\n    at ModuleLoader.resolve (node:internal/modules/esm/loader:708:38)\n    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:309:38)\n    at #link (node:internal/modules/esm/module_job:201:49) {\n  code: 'ERR_MODULE_NOT_FOUND',\n  url: 'file:///Users/lazy/Downloads/together-we-begin/client/src/services/RateLimitService.js'\n}\n\nNode.js v24.2.0\n",
      "success": false,
      "critical": true,
      "skipped": false,
      "error": null
    },
    "TypeScript Compilation": {
      "name": "TypeScript Compilation",
      "script": "test-typescript-types.js",
      "startTime": 1756338516611,
      "endTime": 1756338518721,
      "duration": 2110,
      "exitCode": 1,
      "stdout": "ğŸ“‹ TYPESCRIPT TYPE VERIFICATION & ERROR DEBUGGING\n=================================================\nWorking Directory: /Users/lazy/Downloads/together-we-begin\nNode Version: v24.2.0\n\nğŸ“‹ RUNNING TYPESCRIPT COMPILATION CHECK...\nRunning tsc --noEmit...\nâŒ TypeScript compilation failed\nParsing errors...\nFound 373 TypeScript errors\nCritical errors: 26\nFixable errors: 347\nDatabase Types: 35 errors\nOrganization Types: 94 errors\nComponent Props: 62 errors\nHook Types: 99 errors\nImport/Export: 19 errors\nSupabase Types: 10 errors\nGeneric Types: 18 errors\nOther: 95 errors\n\nğŸ” VERIFYING TYPE DEFINITIONS...\nâœ… Organization Types file exists\nâœ… All required types found in Organization Types\nâœ… Database Types file exists\nâŒ Missing types in Database Types: organizations, organization_members\n\nğŸ“¦ TESTING IMPORT RESOLUTION...\nâœ… client/src/contexts/OrganizationContext.tsx exists\n  âœ… Imports ../integrations/supabase/client\n  âœ… Imports ../types/organization\nâœ… client/src/components/organization/OrganizationSwitcher.tsx exists\n  âœ… Imports ../../contexts/OrganizationContext\n  âŒ Missing import ../../integrations/supabase/client\nâœ… client/src/hooks/useOrganizationData.ts exists\n  âœ… Imports ../integrations/supabase/client\n  âŒ Missing import ../types/organization\n\nChecking for circular dependencies...\nâœ… No circular dependencies found\n\nâš›ï¸  TESTING COMPONENT TYPE COMPATIBILITY...\nâœ… client/src/contexts/OrganizationContext.tsx exists\n  âš ï¸  Type issues:\n    - Context type may be undefined\nâœ… client/src/components/organization/OrganizationSwitcher.tsx exists\n  âœ… No obvious type issues\nâœ… client/src/components/organization/ThemeCustomization.tsx exists\n  âš ï¸  Type issues:\n    - React.FC used without proper props typing\nâœ… client/src/components/organization/FeatureToggleManager.tsx exists\n  âš ï¸  Type issues:\n    - React.FC used without proper props typing\nâœ… client/src/hooks/useOrganizationData.ts exists\n  âœ… No obvious type issues\n\nğŸ”§ GENERATING TYPE FIXES...\nâœ… Generated fix-typescript-types.sh\nâœ… Generated typescript-fixes.json\n\nğŸ“Š TYPESCRIPT TYPE VERIFICATION REPORT\n================================================================================\n\nğŸ“‹ COMPILATION SUMMARY:\nTypeScript Compilation: âŒ Fails\nTotal Errors: 373\nCritical Errors: 26\nFixable Errors: 347\n\nğŸ“Š ERROR BREAKDOWN BY CATEGORY:\nDatabase Types: 35 errors\n  - OrganizationAdminDropdown.tsx:77 TS2345: Argument of type '\"get_organization_admin_data\"' is not assi...\n  - OrganizationAdminDropdown.tsx:86 TS2345: Argument of type '\"get_organization_members_for_admin\"' is n...\n  - OrganizationDetailModal.tsx:84 TS2345: Argument of type '\"get_organization_admin_details\"' is not a...\n  ... and 32 more\nOrganization Types: 94 errors\n  - OrganizationAdminDropdown.tsx:82 TS2345: Argument of type 'Json | { author_id: string; author_name: s...\n  - OrganizationAdminDropdown.tsx:91 TS2345: Argument of type 'string | number | true | { [key: string]: ...\n  - OrganizationDetailModal.tsx:90 TS2345: Argument of type 'Json | { author_id: string; author_name: s...\n  ... and 91 more\nComponent Props: 62 errors\n  - ContentModerationQueue.tsx:101 TS2339: Property 'map' does not exist on type 'string | number | boo...\n  - PlatformAdminDashboard.tsx:96 TS2339: Property 'amount_cents' does not exist on type 'SelectQueryE...\n  - OrganizationAuth.tsx:100 TS2339: Property 'type' does not exist on type '{ code: string; crea...\n  ... and 59 more\nHook Types: 99 errors\n  - useCommunityFeed.ts:100 TS2345: Argument of type '(string | null)[]' is not assignable to pa...\n  - useCommunityFeed.ts:111 TS2345: Argument of type 'string | null' is not assignable to parame...\n  - useCommunityFeed.ts:125 TS2345: Argument of type '(prev: FeedPost[]) => (FeedPost | { id: st...\n  ... and 96 more\nImport/Export: 19 errors\n  - DraggableDashboard.tsx:2 TS2307: Cannot find module '@dnd-kit/core' or its corresponding type...\n  - DraggableDashboard.tsx:3 TS2307: Cannot find module '@dnd-kit/sortable' or its corresponding ...\n  - DraggableDashboard.tsx:4 TS2307: Cannot find module '@dnd-kit/modifiers' or its corresponding...\n  ... and 16 more\nSupabase Types: 10 errors\n  - supabase-org.ts:22 TS2339: Property 'current_organization_id' does not exist on type 'S...\n  - supabase-org.ts:23 TS2339: Property 'current_organization_id' does not exist on type 'S...\n  - supabase-org.ts:28 TS2769: No overload matches this call....\n  ... and 7 more\nGeneric Types: 18 errors\n  - PlatformAdminDashboard.tsx:290 TS2322: Type '{ compact: true; }' is not assignable to type 'Intrins...\n  - PlatformAdminDashboard.tsx:291 TS2322: Type '{ compact: true; }' is not assignable to type 'Intrins...\n  - MobileCommunityFeed.tsx:242 TS2322: Type '\"outline\"' is not assignable to type '\"destructive\" | ...\n  ... and 15 more\nOther: 95 errors\n  - InviteCodeManager.tsx:87 TS2769: No overload matches this call....\n  - InviteCodeManager.tsx:93 TS2345: Argument of type '({ action: string; admin_id: string; creat...\n  - InviteCodeManager.tsx:137 TS2769: No overload matches this call....\n  ... and 92 more\n\nğŸ” TYPE DEFINITION SUMMARY:\nDatabase Types: âœ… Exist\nOrganization Types: âœ… Exist\nSupabase Generated: âœ… Yes\nMissing Types: 2\nMissing types:\n  - Database Types:organizations\n  - Database Types:organization_members\n\nğŸ“¦ IMPORT RESOLUTION SUMMARY:\nWorking Imports: 4\nUnresolved Imports: 2\nCircular Dependencies: 0\n\nâš›ï¸  COMPONENT TYPE SUMMARY:\nComponents with Issues: 3\n\nğŸš¨ CRITICAL TYPE ISSUES:\nâŒ TypeScript compilation fails - app cannot build\nâŒ Too many critical errors (26)\n\nğŸ’¡ IMMEDIATE ACTIONS REQUIRED:\n3. Fix unresolved imports\n   Check import paths and module exports\n4. Fix critical TypeScript errors\n   Focus on TS2307 and TS2305 errors first\n\nğŸ¯ TYPE SAFETY SCORE: 20/100 - Critical Issues\n\nğŸ“‹ DETAILED RESULTS SAVED TO:\n- typescript-test-results.json (detailed analysis)\n- typescript-fixes.json (fix recommendations)\n- fix-typescript-types.sh (executable fix script)\n",
      "stderr": "- Finding files\nâœ” No circular dependency found!\n",
      "success": false,
      "critical": true,
      "skipped": false,
      "error": null
    },
    "Database Connectivity (Final)": {
      "name": "Database Connectivity (Final)",
      "script": "test-database-connectivity.js",
      "startTime": 1756338519722,
      "endTime": 1756338520218,
      "duration": 496,
      "exitCode": 1,
      "stdout": "ğŸ”— DATABASE CONNECTIVITY TEST SUITE\n===================================\nTarget Database: https://ynqdddwponrqwhtqfepi.supabase.co\nTest Environment: darwin / Node.js v24.2.0\n\nğŸ”— TESTING NODE.JS DATABASE CONNECTIVITY...\nTesting basic Supabase connection...\nâŒ Node.js connectivity test failed: Connection failed: relation \"public.information_schema.tables\" does not exist\n\nâš›ï¸  TESTING REACT ENVIRONMENT CONNECTIVITY...\nTesting Supabase client import...\nâœ… Supabase client configuration exists\nâœ… Database types are imported\nTesting Organization Context Provider...\nâŒ Organization Context missing: supabase.from\nâœ… Context has error handling\nTesting organization hooks...\nâœ… useOrganizationData.ts exists and has React hooks\nâœ… useOrganizationFeatures.ts exists and has React hooks\nâœ… useOrganizationMembers.ts exists and has React hooks\nTesting organization components...\nâœ… OrganizationSwitcher.tsx is a valid React component\n  â””â”€ Uses organization context\nâœ… ThemeCustomization.tsx is a valid React component\n  â””â”€ Uses organization context\nâœ… FeatureToggleManager.tsx is a valid React component\n  â””â”€ Uses organization context\nâœ… DraggableDashboard.tsx is a valid React component\n  â””â”€ Uses organization context\nTesting real-time subscription patterns...\nâœ… Real-time subscriptions implemented in context\n  â””â”€ Uses postgres_changes for real-time updates\n  â””â”€ Subscriptions are organization-filtered\nTesting organization switching logic...\nâœ… Organization switching logic exists\n  â””â”€ Organization preference persistence implemented\n\nğŸ”„ TESTING FRONTEND-BACKEND DATA FLOW...\nTesting data flow integration...\nâŒ Data flow patterns incomplete\nTesting organization data isolation...\nâœ… Organization data isolation implemented\nTesting real-time sync...\nâœ… Real-time sync implemented\n  â””â”€ Handles real-time updates\n  â””â”€ Handles organization deletions\nTesting error boundaries...\nâœ… client/src/components/ui/enhanced-error-boundary.tsx exists\nâœ… client/src/components/ui/error-boundary.tsx exists\n\nâš¡ TESTING PERFORMANCE METRICS...\nâœ… Memory usage: 12MB heap, 94MB RSS\nTesting connection pooling...\nâœ… Connection pooling: 10 queries in 300ms (avg 30.0ms)\n\nğŸ“Š DATABASE CONNECTIVITY REPORT\n================================================================================\n\nğŸ”— NODE.JS CONNECTIVITY:\nBasic Connection: âŒ Failed\nAuthentication: âŒ Failed\nQuery Execution: âŒ Failed\nRPC Functions: âŒ Failed\nOrganization Queries: âŒ Failed\nReal-time Connection: âŒ Failed\nError Handling: âŒ Failed\nErrors: 1\n  - General: Connection failed: relation \"public.information_schema.tables\" does not exist\n\nâš›ï¸  REACT CONNECTIVITY:\nSupabase Client: âœ… Working\nContext Provider: âŒ Failed\nHooks Execute: âœ… Working\nComponents Render: âœ… Working\nRealtime Subscriptions: âœ… Working\nOrganization Switching: âœ… Working\nErrors: 1\n  - Context missing: supabase.from\n\nğŸ”„ INTEGRATION:\nData Flow: âŒ Failed\nOrganization Isolation: âœ… Working\nReal-time Sync: âœ… Working\nError Boundaries: âœ… Working\n\nâš¡ PERFORMANCE:\nConnection Time: 121ms\nMemory Usage: 12MB heap\nConnection Pooling: 30ms avg (10 concurrent)\n\nğŸš¨ CRITICAL CONNECTIVITY ISSUES:\nâŒ Node.js cannot connect to database\nâŒ Organization Context Provider broken - app will crash\nâŒ Frontend-backend data flow broken\nâŒ Organization queries fail - multi-tenant broken\n\nğŸ¯ CONNECTIVITY SCORE: 30/100 - Poor\n\nğŸ“‹ DETAILED RESULTS SAVED TO: connectivity-test-results.json\n",
      "stderr": "",
      "success": false,
      "critical": true,
      "skipped": false,
      "error": null
    }
  },
  "overallStatus": "CRITICAL ISSUES",
  "recommendations": [
    "ğŸš¨ URGENT: Fix critical test failures before proceeding",
    "âœ… Complete database repair process",
    "ğŸ”§ Run database repair migration to create missing tables",
    "ğŸ¢ Fix multi-tenant integration issues",
    "ğŸ“‹ Fix TypeScript compilation errors",
    "ğŸ”— Fix database connectivity issues",
    "ğŸ”§ Additional fixes needed after repair"
  ],
  "nextSteps": [
    "Address critical failures immediately",
    "Re-run repair validation after fixes",
    "Execute: npm run db:repair",
    "Verify organization context and data isolation",
    "Run: bash fix-typescript-types.sh",
    "Check Supabase configuration and network",
    "Address remaining issues"
  ],
  "endTime": "2025-08-27T23:48:41.220Z",
  "summary": {
    "status": "CRITICAL ISSUES",
    "readyForProduction": false,
    "criticalIssues": 5,
    "minorIssues": 0,
    "totalDuration": 6106,
    "averageDuration": 1221
  }
}